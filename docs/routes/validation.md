---
title: éªŒè¯
---

# éªŒè¯å…³é”®å­—

Ajv æ”¯æŒéªŒè¯ JSON Schema æ ‡å‡† draft-07 çš„æ‰€æœ‰å…³é”®è¯ï¼š

## `type`

`type`å…³é”®å­—è¦æ±‚æ•°æ®æ—¶æŸç§ç±»å‹(æˆ–æŸäº›ç±»å‹)ã€‚ä»–çš„å€¼å¯ä»¥å­—ç¬¦ä¸²(å…è®¸çš„ç±»å‹)æˆ–å­—ç¬¦ä¸²æ•°ç»„(å…è®¸çš„å¤šç§ç±»å‹).

å€¼å¯ä»¥ä¸ºï¼š`number`ã€`integer`ã€`string`ã€`boolean`ã€`array`ã€`object`æˆ–`null`ã€‚

**ç¤ºä¾‹ï¼š**

1. schema: `{ "type": "number" }`     
   valid: `1`ã€`1.5`    
   invalid: `"abc"`ã€`"1"`ã€`[]`ã€`{}`ã€`null`ã€`true`

2. schema: `{ "type": "integer" }`     
   valid: `1`ã€`2`    
   invalid: `"abc"`ã€`"1"`ã€`1.5`ã€`[]`ã€`{}`ã€`null`ã€`true`

3. schema: `{ "type": ["number", "string"] }`     
   valid: `1`ã€`1.5`ã€`"abc"`ã€`"1"`    
   invalid: `[]`ã€`{}`ã€`null`ã€`true`

ä¸Šé¢çš„æ‰€æœ‰ç¤ºä¾‹éƒ½æ˜¯ JSON Schemaï¼Œåªæœ‰ç‰¹å®šçš„ç±»å‹æ‰æœ‰æ•ˆã€‚

å¤§å¤šæ•°çš„å…¶ä»–å…³é”®å­—å€¼é€‚ç”¨äºç‰¹å®šç±»å‹çš„æ•°æ®ã€‚å¦‚æœæ•°æ®æ˜¯ä¸åŒçš„ç±»å‹çš„ï¼Œé‚£ä¹ˆå…³é”®å­—å°†ä¸é€‚ç”¨ï¼Œæ•°æ®ä¹Ÿä¼šè¢«è®¤ä¸ºæ˜¯æœ‰æ•ˆæ•°æ®ã€‚

## æ•°å­—éªŒè¯å…³é”®å­—

### `maximum`/`minimum`å’Œ`exclusiveMaximum`/`exclusiveMinimum`

å…³é”®å­—`maximum`(`minimum`)çš„å€¼åº”è¯¥æ˜¯ä¸€ä¸ªæ•°å­—ã€‚è¯¥å€¼æ˜¯å…è®¸çš„æœ‰æ•ˆæ•°æ®çš„æœ€å¤§å€¼(æœ€å°å€¼)ã€‚

Draft-04ï¼šå…³é”®å­—`exclusiveMaximum`(`exclusiveMinimum`)çš„å€¼åº”è¯¥æ˜¯**å¸ƒå°”å€¼**ã€‚è¯¥å…³é”®å­—ä¸èƒ½è„±ç¦»`maximum`(`minimum`)å•ç‹¬ä½¿ç”¨ã€‚å¦‚æœå…³é”®å­—çš„å€¼ç­‰åŒäº`true`ï¼Œæ•°æ®åº”è¯¥ä¸ç­‰äº`maximum`(`minimum`)ä¸­çš„å€¼æ‰ç®—æœ‰æ•ˆã€‚

Draft-06/07: å…³é”®å­—`exclusiveMaximum`(`exclusiveMinimum`)çš„å€¼åº”è¯¥æ˜¯**æ•°å­—**ã€‚è¯¥å€¼æ˜¯å…è®¸æ•°æ®æœ‰æ•ˆçš„å”¯ä¸€æœ€å¤§å€¼(æœ€å°å€¼)(ç­‰äºè¯¥å…³é”®å­—å€¼çš„æ•°æ®æ˜¯æ— æ•ˆçš„)ã€‚

Ajv åŒæ—¶æ”¯æŒ draft-04 å’Œ draft-06/07 è¯­æ³•ã€‚

**ç¤ºä¾‹ï¼š**

1. schema: `{ "maximum": 5 }`     
   valid: `4`ã€`5`ã€ä»»ä½•éæ•°å­—çš„`"abc"`ã€`[]`ã€`{}`ã€`null`ã€`true`  
   invalid: `6`ã€`7`

2. schema: `{ "minimum": 5 }`     
   valid: `5`ã€`6`ã€ä»»ä½•éæ•°å­—çš„`"abc"`ã€`[]`ã€`{}`ã€`null`ã€`true`    
   invalid: `4`ã€`4.5`

3. schema:     
        draft-04ï¼š `{ "minimum": 5, "exclusiveMinimum": true }`     
        draft-06/07ï¼š`{ "exclusiveMinimum": 5 }`       
   valid: `6`ã€`7`ã€ä»»ä½•éæ•°å­—çš„`"abc"`ã€`[]`ã€`{}`ã€`null`ã€`true`   
   invalid: `4.5`ã€`5`

### `multipleOf`  

è¯¥å…³é”®å­—çš„å€¼åº”è¯¥æ˜¯**æ•°å­—**ã€‚æœ‰æ•ˆçš„æ•°æ®åº”è¯¥æ˜¯å…³é”®å­—çš„å€æ•°(å³æ•°æ®åœ¨å€¼ä¸Šåšé™¤æ³•çš„ç»“æœåº”è¯¥æ˜¯æ•´æ•°)ã€‚

**ç¤ºä¾‹ï¼š**

1. schema: `{ "multipleOf": 5 }`     
   valid: `5`ã€`10`ã€ä»»ä½•éæ•°å­—çš„`"abc"`ã€`[]`ã€`{}`ã€`null`ã€`true`  
   invalid: `6`ã€`7`

2. schema: `{ "multipleOf": 2.5 }`     
   valid: `2.5`ã€`7.5`ã€ä»»ä½•éæ•°å­—çš„`"abc"`ã€`[]`ã€`{}`ã€`null`ã€`true`    
   invalid: `1`ã€`4`

## å­—ç¬¦ä¸²éªŒè¯å…³é”®å­—

### `maxLength`/`minLength`

è¯¥å…³é”®å­—çš„å€¼åº”è¯¥æ˜¯**æ•°å­—**ã€‚åº”æ»¡è¶³è¿™ä¸ªè§„åˆ™çš„é•¿åº¦çš„æ•°æ®æ˜¯æœ‰æ•ˆæ•°æ®ã€‚Unicodeå¯¹è¢«è®¡ç®—ä¸ºå•ä¸ªå­—ç¬¦ã€‚

**ç¤ºä¾‹ï¼š**

1. schema: `{ "maxLength": 5 }`     
   valid: `"abc"`ã€`"abcde"`ã€ä»»ä½•éå­—ç¬¦ä¸²çš„`1`ã€`[]`ã€`{}`ã€`null`ã€`true`  
   invalid: `"abcdef"`

2. schema: `{ "minLength": 2 }`     
   valid: `"ab"`ã€`"ğŸ˜€ğŸ˜€"`ã€ä»»ä½•éå­—ç¬¦ä¸²çš„`"abc"`ã€`[]`ã€`{}`ã€`null`ã€`true`    
   invalid: `"a"`ã€`"ğŸ˜€"`

### `pattern`   

è¯¥å…³é”®å­—çš„å€¼åº”è¯¥æ˜¯**å­—ç¬¦ä¸²**ã€‚ä¸è¯¥å…³é”®å­—å®šä¹‰çš„æ­£åˆ™è¡¨è¾¾å¼ç›¸åŒ¹é…çš„æ•°æ®æ˜¯æœ‰æ•ˆæ•°æ®ã€‚

Ajv ä½¿ç”¨äº†`new RegExp(value)`æ¥åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼ä»¥æµ‹è¯•æ•°æ®ã€‚

**ç¤ºä¾‹ï¼š**

1. schema: `{ "pattern": "[abc]+" }`     
   valid: `"a"`ã€`"abcd"`ã€`"cde"`ã€ä»»ä½•éå­—ç¬¦ä¸²çš„`1`ã€`[]`ã€`{}`ã€`null`ã€`true`  
   invalid: `"def"`ã€`""`

### `format` 

è¯¥å…³é”®å­—çš„å€¼åº”è¯¥æ˜¯**å­—ç¬¦ä¸²**ã€‚ä¸å®ƒæ ¼å¼ç›¸åŒ¹é…çš„æ•°æ®æ‰æ˜¯æœ‰æ•ˆæ•°æ®ã€‚

Ajv å®šä¹‰äº†è¿™äº›æ ¼å¼ï¼š`date`ã€`date-time`ã€`uri`ã€`email`ã€`hostname`ã€`ipv4`ã€`ipv6`ã€`regex`ã€‚

**ç¤ºä¾‹ï¼š**  

1. schema: `{ "format": "ipv4" }`     
   valid: `"192.168.0.1"`ã€ä»»ä½•éå­—ç¬¦ä¸²çš„`1`ã€`[]`ã€`{}`ã€`null`ã€`true`       
   invalid: `"abc"`

### `formatMaximum`/`formatMinimum`å’Œ`formatExclusiveMaximum`/`formatExclusiveMinimum`(ææ¡ˆ)ã€‚

åœ¨[ajv-keywords](/ajv-docs-cn/routes/keywords)åŒ…ä¸­å®šä¹‰çš„ã€‚

`formatMaximum`(`formatMinimum`)å…³é”®å­—çš„å€¼åº”è¯¥æ˜¯**å­—ç¬¦ä¸²**ã€‚è¯¥å€¼æ˜¯ç”±`format`å…³é”®å­—å†³å®šçš„å…è®¸æœ‰æ•ˆçš„æœ€å¤§å€¼(æœ€å°å€¼)ã€‚

Ajv å®šä¹‰äº†`"date"`ã€`"time"`å’Œ`"date-time"`æ ¼å¼çš„æ¯”è¾ƒè§„åˆ™ã€‚

`formatExclusiveMaximum`(`formatExclusiveMinimum`)å…³é”®å­—çš„å€¼åº”è¯¥æ˜¯**å¸ƒå°”å€¼**ã€‚å®ƒä»¬ä¸èƒ½è„±ç¦»`formatMaximum`(`formatMinimum`)è€Œå­˜åœ¨ã€‚å¦‚æœè¯¥å€¼ç­‰äº`true`ã€‚ æœ‰æ•ˆçš„æ•°æ®ä¸åº”å½“ç­‰äº`formatMaximum`(`formatMinimum`)å…³é”®å­—çš„å€¼ã€‚

**ç¤ºä¾‹ï¼š**  

schemaï¼š

```json
{
    "format": "date",
    "formatMaximum": "2016-02-06",
    "formatExclusiveMaximum": true
}
```

valid: `"2015-12-31"`ã€`2016-02-05`å’Œä»»ä½•éå­—ç¬¦ä¸²     
invalid: `"2016-02-06"`ã€`"2016-02-07"`ã€`"abc"`


## æ•°ç»„éªŒè¯å…³é”®å­—   

### `maxItems`/`minItems`    

è¯¥å…³é”®å­—çš„å€¼åº”è¯¥æ˜¯**æ•°å­—**ã€‚æœ‰æ•ˆçš„æ•°ç»„é¡¹ç›®ä¸ªæ•°åº”å½“ä¸å¤šäº(å°‘äº)è¯¥å…³é”®å­—çš„å€¼ã€‚

**ç¤ºä¾‹ï¼š**  

1. schema: `{ "maxItems": 3 }`        
   valid: `[]`ã€`[1]`ã€`["1", 2, "3"]`ã€ä»»ä½•éæ•°ç»„çš„(`"abc"`ã€`1`ã€`{}`ã€`null`ã€`true`)     
   invalid: `[1, 2, 3, 4]`

### `uniqueItems`   

å…³é”®å­—çš„å€¼åº”è¯¥æ˜¯**å¸ƒå°”å€¼**ã€‚å¦‚æœå…³é”®å­—çš„å€¼ä¸º`true`ï¼Œé‚£ä¹ˆæœ‰æ•ˆçš„æ•°æ®æ•°ç»„åº”è¯¥å…·æœ‰å”¯ä¸€çš„é¡¹ã€‚

**ç¤ºä¾‹ï¼š**  

1. schema: `{ "uniqueItems": true }`     
   valid: `[]`ã€`[1]`ã€`["1", 2, "3"]`ã€ä»»ä½•éæ•°ç»„çš„(`"abc"`ã€`1`ã€`{}`ã€`null`ã€`true`)     
   invalid: `[1, 2, 1]`ã€`[{ "a": 1, "b": 2 }, { "b": 2, "a": 1 }]`

### `items`   

è¯¥å…³é”®å­—çš„å€¼åº”è¯¥æ˜¯**å¯¹è±¡**æˆ–**å¯¹è±¡æ•°ç»„**ã€‚

å¦‚æœå…³é”®å­—çš„å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆæ ¹æ®è¯¥å€¼çš„ schemaï¼Œè¦ä½¿æ•°æ®æ•°ç»„æœ‰æ•ˆåˆ™æ•°ç»„ä¸­çš„æ¯é¡¹éƒ½æ˜¯æœ‰æ•ˆæ•°æ®ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ`additionalItems`å…³é”®å­—è¢«å¿½ç•¥ã€‚

å¦‚æœå…³é”®å­—çš„å€¼æ˜¯æ•°ç»„ï¼Œé‚£ä¹ˆæ ¹æ®å…·æœ‰ç›¸åŒç´¢å¼•çš„ schemaï¼Œç´¢å¼•å€¼å°äºå…³é”®å­—ä¸­é¡¹æ•°çš„é¡¹åº”è¯¥æ˜¯æœ‰æ•ˆå€¼ã€‚é¢å¤–é¡¹æ˜¯å¦æœ‰æ•ˆåˆ™å–å†³äº`additionalItems`å…³é”®å­—ã€‚

1. schema: `{ "items": { "type": "integer" } }`        
   valid: `[1,2,3]`ã€`[]`ã€ä»»ä½•éæ•°ç»„çš„(`1`ã€`"abc"`ã€`{}`ã€`null`ã€`true`)    
   invalid: `[1, "abc"]`

2. schema:
    ```json
    {
        "items": [
            { "type": "integer" },
            { "type": "string" }
        ]
    }
    ```
    valid: `[1]`ã€`[1, "abc"]`ã€`[1,"abc",2]`ã€`[]`ã€ä»»ä½•éæ•°ç»„çš„(`1`ã€`"abc"`ã€`{}`ã€`null`ã€`true`)    
    invalid: `["abc", 1]`, `["abc"]`

### `additionalItems`

å…³é”®å­—çš„å€¼åº”è¯¥æ˜¯**å¸ƒå°”å€¼**æˆ–**å¯¹è±¡**ã€‚

å¦‚æœ`item`å…³é”®å­—ä¸å­˜åœ¨æˆ–è€…æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆ`additionalItems`å…³é”®å­—ä¼šè¢«å¿½ç•¥ã€‚

å¦‚æœ`item`å…³é”®å­—æ˜¯ä¸€ä¸ªæ•°ç»„ä¸”æ•°æ®æ•°ç»„çš„é•¿åº¦ä¸è¶…è¿‡`items`å…³é”®å­—å€¼çš„é•¿åº¦ï¼Œé‚£ä¹ˆ`additionalItems`å…³é”®å­—ä¹Ÿä¼šè¢«å¿½ç•¥ã€‚

å¦‚æœæ•°æ®æ•°ç»„çš„é•¿åº¦å¤§äº`items`å…³é”®å­—çš„é•¿åº¦ï¼ŒéªŒè¯çš„ç»“æœå°±å–å†³äº`additionalItems`å…³é”®å­—çš„å€¼äº†ï¼š

- `false`: æ•°æ®æ— æ•ˆ
- `true`: æ•°æ®æœ‰æ•ˆ
- å¯¹è±¡: å¦‚æœæ‰€æœ‰é¢å¤–é¡¹çš„å€¼(å³ç´¢å¼•å¤§äºæˆ–ç­‰äº`items`å…³é”®å­—å€¼é•¿åº¦çš„é¡¹)é€šè¿‡äº†`additionalItems`å…³é”®å­—çš„ schema éªŒè¯ï¼Œåˆ™æ•°æ®æœ‰æ•ˆã€‚

**ç¤ºä¾‹ï¼š**  

1. schema: `{ "additionalItems": { "type": "integer" } }`       
    ä»»ä½•æœ‰æ•ˆçš„æ•°æ®éƒ½ä¼šè®©`additionalItems`è¢«å¿½ç•¥ã€‚

2. schema:    
   ```js
    {
        "items": { "type": "integer" },
        "additionalItems": { "type": "string" }
    }
   ``` 
    valid: `[]`ã€`[1, 2]`å’Œä»»ä½•éæ•°ç»„å…ƒç´ (`additionalItems`è¢«å¿½ç•¥)     
    invalid: `[1, "abc"]`ã€(ä»»ä½•å¸¦æœ‰é™¤æ•´æ•°ä»¥å¤–é¡¹çš„ä»»æ„æ•°ç»„)

3. schema:  
    ```json
    {
        "items": [
            { "type": "integer" },
            { "type": "integer" }
        ],
        "additionalItems": true
    }
    ```  
    valid: `[]`ã€`[1, 2]`ã€`[1, 2, 3]`ã€`[1, 2, "abc"]`ã€ä»»ä½•éæ•°ç»„ã€‚    
    invalid: `["abc"]`ã€`[1, "abc", 3]`  

4. schema:
    ```json
    {
        "items": [
            { "type": "integer" },
            { "type": "integer" }
        ],
        "additionalItems": { "type": "string" }
    }
    ```   
    valid: `[]`ã€`[1, 2]`ã€`[1, 2, "abc"]`ã€ä»»ä½•éæ•°ç»„ã€‚    
    invalid: `["abc"]`ã€`[1, 2, 3]`

### `contains`   

å…³é”®å­—çš„å€¼æ—¶ JSON Schemaã€‚å¦‚æœæ ¹æ®è¯¥ schemaï¼Œæ•°ç»„ä¸­è‡³å°‘åŒ…å«ä¸€ä¸ªç¬¦åˆè¯¥ Schema çš„æœ‰æ•ˆé¡¹ï¼Œåˆ™è¯¥æ•°ç»„æ˜¯æœ‰æ•ˆæ•°æ®ã€‚

**ç¤ºä¾‹ï¼š**  

schema: `{ "contains": { "type": "integer" } }`      
valid: `[1]`ã€`[1, "foo"]`ã€ä»»ä½•å¸¦æœ‰è‡³å°‘ä¸€ä¸ªæ•´æ•°çš„æ•°ç»„ã€ä»»ä½•éæ•°ç»„ã€‚        
invalid: `[]`ã€`["foo", "bar"]`ã€ä»»ä½•æ— æ•´æ•°çš„æ•°ç»„ã€‚   

è¯¥ schema æŒ‰ä¸Šé¢çš„ä¾‹å­ç­‰åŒäºï¼š

```json
{
    "not": {
        "type": "array",
        "items": {
            "not": { "type": "integer" }
        }
    }
}
```

## å¯¹è±¡éªŒè¯å…³é”®å­—

### `maxProperties`/`minProperties`  

å…³é”®å­—åº”è¯¥æ˜¯**æ•°å­—**ã€‚æœ‰æ•ˆçš„æ•°æ®å¯¹è±¡çš„å±æ€§ä¸åº”è¯¥æ¯”å…³é”®å­—å€¼å¤š(å°‘)ã€‚

**ç¤ºä¾‹ï¼š**
















